<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <title>Chain Reaction - Free Online Multiplayer Strategy Game | Kaiross</title>

    <!-- Primary SEO Meta Tags -->
    <meta name="description" content="Play Chain Reaction online - the ultimate strategic multiplayer board game. Challenge AI or friends, trigger explosive chain reactions, capture cells and dominate the grid. Free to play, no download required.">
    <meta name="keywords" content="chain reaction game, chain reaction online, multiplayer strategy game, board game online, puzzle game, AI game, free browser game, turn based strategy, cell capture game, explosion game, kaiross games, play with friends online">
    <meta name="author" content="Kaiross">
    <meta name="creator" content="Kaiross">
    <meta name="publisher" content="Kaiross">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://chain.kaiross.in/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://chain.kaiross.in/">
    <meta property="og:title" content="Chain Reaction - Free Online Multiplayer Strategy Game">
    <meta property="og:description" content="Play Chain Reaction online - strategic multiplayer board game with AI opponent. Capture cells, trigger chain reactions, and dominate the grid!">
    <meta property="og:image" content="https://chain.kaiross.in/public/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Chain Reaction Game - Strategic multiplayer board game">
    <meta property="og:site_name" content="Chain Reaction by Kaiross">
    <meta property="og:locale" content="en_US">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://chain.kaiross.in/">
    <meta name="twitter:title" content="Chain Reaction - Free Online Multiplayer Strategy Game">
    <meta name="twitter:description" content="Play Chain Reaction online - strategic multiplayer board game with AI. Capture cells, trigger chain reactions, dominate the grid!">
    <meta name="twitter:image" content="https://chain.kaiross.in/public/og-image.png">
    <meta name="twitter:creator" content="@kaiross">

    <!-- PWA & Mobile -->
    <meta name="theme-color" content="#FF6B00" media="(prefers-color-scheme: dark)">
    <meta name="theme-color" content="#FF6B00" media="(prefers-color-scheme: light)">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Chain Reaction">
    <meta name="application-name" content="Chain Reaction">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="format-detection" content="telephone=no">

    <!-- Favicons & Icons -->
    <link rel="icon" type="image/svg+xml" href="/public/favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="/public/icons/icon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/public/icons/icon-16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/public/icons/apple-touch-icon.png">
    <link rel="mask-icon" href="/public/favicon.svg" color="#FF6B00">

    <!-- PWA Manifest -->
    <link rel="manifest" href="/public/manifest.json">

    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">

    <!-- Styles -->
    <link rel="stylesheet" href="public/css/style.css">

    <!-- Structured Data - Game -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "VideoGame",
        "name": "Chain Reaction",
        "alternateName": ["Chain Reaction Game", "Chain Reaction Online"],
        "description": "Strategic multiplayer board game where players capture cells and trigger explosive chain reactions. Play against AI or challenge friends online.",
        "url": "https://chain.kaiross.in/",
        "image": "https://chain.kaiross.in/public/logo.svg",
        "screenshot": "https://chain.kaiross.in/public/og-image.png",
        "author": {
            "@type": "Organization",
            "name": "Kaiross",
            "url": "https://kaiross.in"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Kaiross",
            "url": "https://kaiross.in",
            "logo": {
                "@type": "ImageObject",
                "url": "https://kaiross.in/favicon.svg"
            }
        },
        "genre": ["Strategy", "Puzzle", "Board Game", "Multiplayer"],
        "gamePlatform": ["Web Browser", "Mobile Browser", "Desktop Browser"],
        "applicationCategory": "Game",
        "operatingSystem": "Any",
        "browserRequirements": "Requires JavaScript",
        "inLanguage": "en",
        "isAccessibleForFree": true,
        "isFamilyFriendly": true,
        "numberOfPlayers": {
            "@type": "QuantitativeValue",
            "minValue": 1,
            "maxValue": 6
        },
        "playMode": ["SinglePlayer", "MultiPlayer", "CoOp"],
        "gameItem": [
            {
                "@type": "Thing",
                "name": "AI Opponent",
                "description": "Play against intelligent AI"
            },
            {
                "@type": "Thing",
                "name": "Online Multiplayer",
                "description": "Challenge friends online"
            }
        ],
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD",
            "availability": "https://schema.org/InStock"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "150",
            "bestRating": "5",
            "worstRating": "1"
        }
    }
    </script>

    <!-- Structured Data - WebApplication -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Chain Reaction",
        "url": "https://chain.kaiross.in/",
        "applicationCategory": "GameApplication",
        "operatingSystem": "Any",
        "browserRequirements": "Requires JavaScript and HTML5 Canvas",
        "softwareVersion": "2.0",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "Play against AI",
            "Online multiplayer",
            "2-6 players support",
            "Multiple grid sizes",
            "Chain reaction mechanics",
            "Real-time gameplay",
            "Mobile responsive",
            "Works offline (PWA)"
        ]
    }
    </script>

    <!-- Structured Data - BreadcrumbList -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Kaiross",
                "item": "https://kaiross.in"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Games",
                "item": "https://kaiross.in/#games"
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "Chain Reaction",
                "item": "https://chain.kaiross.in/"
            }
        ]
    }
    </script>

    <!-- Structured Data - FAQPage for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "How do you play Chain Reaction?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Click on empty cells or your own cells to add orbs. When a cell reaches its critical mass (corners=2, edges=3, center=4), it explodes and spreads to adjacent cells, capturing them for you. The last player with orbs on the board wins!"
                }
            },
            {
                "@type": "Question",
                "name": "Can I play Chain Reaction online with friends?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes! Click 'Play Online' to either auto-match with random players or create a private room with a 4-digit code to share with friends."
                }
            },
            {
                "@type": "Question",
                "name": "Is Chain Reaction free to play?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes, Chain Reaction is completely free to play with no downloads, no ads, and no in-app purchases required."
                }
            },
            {
                "@type": "Question",
                "name": "How many players can play Chain Reaction?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Chain Reaction supports 2 to 6 players in local multiplayer mode. Online mode currently supports 2 players."
                }
            }
        ]
    }
    </script>

</head>

<body>
    <!-- GDPR Cookie Consent Banner -->
    <div id="gdpr-banner" class="gdpr-banner" style="display:none;">
        <div class="gdpr-content">
            <p>We use essential cookies to ensure the game works properly. No tracking or advertising cookies are used. By continuing to play, you accept our use of essential cookies.</p>
            <div class="gdpr-buttons">
                <button id="gdpr-accept" class="gdpr-btn primary">Accept</button>
                <a href="/privacy" class="gdpr-link">Privacy Policy</a>
            </div>
        </div>
    </div>

    <!-- Confetti Container -->
    <div id="confetti-container" class="confetti-container"></div>

    <div class="main-layout">
        <!-- Sidebar (Android-style Menu) -->
        <aside class="sidebar">
            <!-- Title Section -->
            <div class="brand-section">
                <div>
                    <h1>CHAIN</h1>
                    <div class="subtitle">REACTION</div>
                </div>
                <div id="online-status" class="online-status" style="display:none;">
                    ONLINE: <span id="online-room-id">---</span>
                </div>
                <!-- Mobile Menu Toggle -->
                <button id="mobile-menu-btn" class="mobile-menu-btn" aria-label="Toggle Menu">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </button>
            </div>

            <div class="controls-section">
                <!-- Mode Tabs (Like Android) -->
                <div class="mode-tabs">
                    <button class="mode-tab active" data-mode="local" id="mode-local">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"/></svg>
                        Local
                    </button>
                    <button class="mode-tab" data-mode="ai" id="mode-ai">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"/></svg>
                        VS AI
                    </button>
                    <button class="mode-tab" data-mode="online" id="mode-online">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
                        Online
                    </button>
                </div>

                <!-- LOCAL Mode Content -->
                <div id="mode-content-local" class="mode-content">
                    <!-- Player Counter -->
                    <div class="control-group">
                        <label>Players</label>
                        <div class="player-counter">
                            <button class="counter-btn" id="player-minus">−</button>
                            <span class="counter-value" id="player-count">2</span>
                            <button class="counter-btn" id="player-plus">+</button>
                        </div>
                        <div class="player-dots" id="player-dots"></div>
                    </div>

                    <!-- Grid Size Buttons -->
                    <div class="control-group">
                        <label>Grid Size</label>
                        <div class="grid-size-buttons">
                            <button class="grid-btn" data-size="small">Small</button>
                            <button class="grid-btn active" data-size="medium">Medium</button>
                            <button class="grid-btn" data-size="large">Large</button>
                        </div>
                    </div>
                </div>

                <!-- AI Mode Content -->
                <div id="mode-content-ai" class="mode-content" style="display:none;">
                    <div class="control-group">
                        <label>Grid Size</label>
                        <div class="grid-size-buttons">
                            <button class="grid-btn ai-grid" data-size="small">Small</button>
                            <button class="grid-btn ai-grid active" data-size="medium">Medium</button>
                            <button class="grid-btn ai-grid" data-size="large">Large</button>
                        </div>
                    </div>
                    <div class="info-box">
                        Play against our AI opponent. You are <span class="highlight">Player 1 (Red)</span>, AI is <span class="highlight">Player 2 (Green)</span>.
                    </div>
                </div>

                <!-- Online Mode Content -->
                <div id="mode-content-online" class="mode-content" style="display:none;">
                    <div class="control-group">
                        <label>Room Code</label>
                        <input type="text" id="room-code-input-sidebar" class="room-input" maxlength="4" placeholder="ABCD" style="width:100%;">
                    </div>
                    <div class="divider-text">OR</div>
                    <div class="info-box">
                        Create a new room and share the code with a friend, or use <span class="highlight">Auto Match</span> to find an opponent.
                    </div>
                </div>

                <!-- Hidden selects for backward compatibility -->
                <select id="player-select" style="display:none;">
                    <option value="2">2 Players</option>
                    <option value="3">3 Players</option>
                    <option value="4">4 Players</option>
                    <option value="5">5 Players</option>
                    <option value="6">6 Players</option>
                </select>
                <select id="grid-select" style="display:none;">
                    <option value="small">Small (6x4)</option>
                    <option value="medium" selected>Medium (9x6)</option>
                    <option value="large">Large (12x8)</option>
                    <option value="xlarge">XL (15x10)</option>
                </select>
                <input type="checkbox" id="ai-toggle" style="display:none;">

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button id="start-btn" class="primary">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                        START GAME
                    </button>
                    <button id="restart-btn" class="secondary">Restart</button>
                    <button id="online-menu-btn" class="primary" style="display:none;">Play Online</button>
                </div>
            </div>

            <div class="status-section">
                <div class="turn-indicator">
                    <span id="current-turn-text">Player 1's Turn</span>
                </div>
                <div class="footer-link">
                    <a href="https://kaiross.in" target="_blank" rel="noopener noreferrer">Made with <span class="heart">♥</span> by <span class="kaiross">Kaiross</span></a>
                </div>
            </div>
        </aside>

        <!-- Game Area -->
        <main id="game-container" class="game-area" role="main" aria-label="Game Board">
            <canvas id="gameCanvas" aria-label="Chain Reaction Game Canvas"></canvas>
        </main>
    </div>

    <!-- Win Modal -->
    <div id="win-modal" class="modal" role="dialog" aria-labelledby="winner-text" aria-modal="true">
        <div class="modal-content">
            <h2 id="winner-text">Red Wins!</h2>
            <p id="win-subtitle" style="color: #aaa; font-size: 0.9rem; margin-bottom: 15px; display: none;"></p>
            <div class="modal-btn-group" id="local-win-btns">
                <button id="play-again-btn" class="primary">Play Again</button>
            </div>
            <div class="modal-btn-group" id="online-win-btns" style="display:none;">
                <button id="rematch-btn" class="primary">Request Rematch</button>
                <button id="decline-rematch-btn" class="secondary" style="display:none;">Decline</button>
                <button id="exit-online-btn">Exit to Menu</button>
            </div>
            <div id="rematch-status" style="display:none; margin-top:15px;">
                <p id="rematch-status-text" style="color: #fff;"></p>
                <div class="loading-spinner" style="display:none;" id="rematch-spinner"></div>
            </div>
        </div>
    </div>

    <!-- Online Lobby Modal -->
    <div id="lobby-modal" class="modal" role="dialog" aria-labelledby="lobby-title" aria-modal="true">
        <div class="modal-content">
            <h2 id="lobby-title">Online Lobby</h2>
            <div id="lobby-main">
                <div class="modal-btn-group">
                    <button id="auto-match-btn" class="primary">Auto Match</button>
                    <button id="create-room-btn">Create Private Room</button>
                    <button id="join-room-btn">Join via Code</button>
                    <button id="cancel-lobby-btn">Back to Local</button>
                </div>
            </div>

            <!-- Join Room UI -->
            <div id="lobby-join" style="display:none;">
                <p style="color: #aaa; margin-bottom: 10px;">Enter 4-Digit Room Code</p>
                <input type="text" id="room-code-input" class="room-input" maxlength="4" placeholder="ABCD" aria-label="Room Code">
                <div class="modal-btn-group">
                    <button id="confirm-join-btn" class="primary">Join</button>
                    <button id="back-to-main-btn">Back</button>
                </div>
                <p id="join-error" style="color: var(--accent-tertiary); font-size:0.8rem; margin-top:10px;" role="alert"></p>
            </div>

            <!-- Waiting UI -->
            <div id="lobby-waiting" style="display:none;">
                <p id="waiting-msg" style="color: #fff; font-size: 1.2rem;">Looking for opponent...</p>
                <div class="room-code-container" id="room-code-container" style="display:none;">
                    <div class="room-code-display" id="display-room-code"></div>
                    <button id="copy-code-btn" class="copy-btn">
                        <span id="copy-text">Copy Code</span>
                    </button>
                </div>
                <div class="loading-spinner" aria-label="Loading"></div>
                <button id="cancel-waiting-btn" style="margin-top:20px;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- How to Play (Hidden for SEO) -->
    <article id="how-to-play" class="seo-content" aria-hidden="true">
        <h2>How to Play Chain Reaction</h2>
        <p>Chain Reaction is a strategic multiplayer board game where players take turns placing orbs on a grid. The objective is to eliminate all opponents by capturing their cells through chain reactions.</p>
        <h3>Game Rules</h3>
        <ul>
            <li>Click on an empty cell or one of your own cells to place an orb</li>
            <li>Each cell has a critical mass: corners (2), edges (3), center (4)</li>
            <li>When a cell reaches critical mass, it explodes and spreads to adjacent cells</li>
            <li>Explosions capture enemy cells and can trigger chain reactions</li>
            <li>The last player with orbs remaining wins the game</li>
        </ul>
        <h3>Game Modes</h3>
        <ul>
            <li><strong>Local Multiplayer:</strong> Play with 2-6 players on the same device</li>
            <li><strong>vs AI:</strong> Challenge our intelligent AI opponent</li>
            <li><strong>Online:</strong> Play with friends or random opponents online</li>
        </ul>
    </article>

    <!-- Game Scripts -->
    <script type="module" src="public/js/game.js"></script>

    <!-- Service Worker Registration & GDPR -->
    <script>
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/public/sw.js')
                    .then(registration => {
                        console.log('SW registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            });
        }

        // GDPR Cookie Consent
        (function() {
            const GDPR_KEY = 'chain_reaction_gdpr_accepted';
            const banner = document.getElementById('gdpr-banner');
            const acceptBtn = document.getElementById('gdpr-accept');

            // Check if already accepted
            if (!localStorage.getItem(GDPR_KEY)) {
                banner.style.display = 'flex';
            }

            acceptBtn.addEventListener('click', () => {
                localStorage.setItem(GDPR_KEY, 'true');
                banner.style.display = 'none';
            });
        })();

        // Handle PWA install prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            // Could show install button here if desired
        });
    </script>
</body>

</html>
